<Window x:Class="ProcessorDB.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ProcessorDB"
        mc:Ignorable="d"
        Title="Управление базой данных процессоров" Height="600" Width="1000">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Menu Grid.Row="0">
            <MenuItem Header="Файл">
                <MenuItem Header="Выход" Click="Exit_Click"/>
            </MenuItem>
            <MenuItem Header="Управление">
                <MenuItem Header="Добавить процессор" Click="AddProcessor_Click" InputGestureText="Ctrl+N"/>
                <MenuItem Header="Редактировать процессор" Click="EditProcessor_Click" InputGestureText="Ctrl+E"/>
                <MenuItem Header="Удалить процессор" Click="DeleteProcessor_Click" InputGestureText="Del"/>
                <Separator/>
                <MenuItem Header="Управление производителями" Click="ManageManufacturers_Click"/>
                <MenuItem Header="Управление странами" Click="ManageCountries_Click"/>
            </MenuItem>
            <MenuItem Header="Отчеты">
                <MenuItem Header="Цены процессоров" Click="ReportPriceChart_Click"/>
                <MenuItem Header="Частоты процессоров" Click="ReportFrequencyChart_Click"/>
            </MenuItem>
        </Menu>

        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="250"/>
            </Grid.ColumnDefinitions>

            <DataGrid x:Name="ProcessorsGrid" Grid.Column="0" AutoGenerateColumns="False" IsReadOnly="True" Margin="10" ContextMenuOpening="ProcessorsGrid_ContextMenuOpening">
                <DataGrid.ContextMenu>
                    <ContextMenu>
                        <MenuItem Header="Добавить" Click="AddProcessor_Click"/>
                        <MenuItem Header="Редактировать" Click="EditProcessor_Click"/>
                        <MenuItem Header="Удалить" Click="DeleteProcessor_Click"/>
                    </ContextMenu>
                </DataGrid.ContextMenu>
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Наименование" Binding="{Binding Name}"/>
                    <DataGridTextColumn Header="Модель" Binding="{Binding Model}"/>
                    <DataGridTextColumn Header="Производитель" Binding="{Binding Manufacturer.Name}"/>
                    <DataGridTextColumn Header="Страна" Binding="{Binding Country.Name}"/>
                    <DataGridTextColumn Header="Год" Binding="{Binding ReleaseYear}"/>
                    <DataGridTextColumn Header="Техпроцесс" Binding="{Binding TechSpec.TechProcess}"/>
                    <DataGridTextColumn Header="Частота" Binding="{Binding TechSpec.Frequency}"/>
                    <DataGridTextColumn Header="Кеш L3" Binding="{Binding TechSpec.CacheL3}"/>
                    <DataGridTextColumn Header="Ядра" Binding="{Binding TechSpec.Cores}"/>
                    <DataGridTextColumn Header="Слот" Binding="{Binding TechSpec.Slot}"/>
                    <DataGridTextColumn Header="Дата производства" Binding="{Binding ProductionInfo.ProductionDate, StringFormat=dd.MM.yyyy}"/>
                    <DataGridTextColumn Header="Гарантия" Binding="{Binding ProductionInfo.WarrantyPeriod}"/>
                    <DataGridTextColumn Header="Цена" Binding="{Binding ProductionInfo.Price}"/>
                    <DataGridTextColumn Header="Баллы" Binding="{Binding ProductionInfo.Points}"/>
                    <DataGridCheckBoxColumn Header="Акция" Binding="{Binding ProductionInfo.Promotion}"/>
                </DataGrid.Columns>
            </DataGrid>

            <StackPanel Grid.Column="1" Margin="10">
                <Label>Поиск по названию:</Label>
                <TextBox x:Name="SearchTextBox" TextChanged="SearchTextBox_TextChanged" Margin="0,0,0,10"/>

                <Label>Мин. цена:</Label>
                <TextBox x:Name="MinPriceTextBox" TextChanged="FilterPrice_TextChanged" Margin="0,0,0,10" PreviewTextInput="NumericOnly_PreviewTextInput"/>

                <Label>Макс. цена:</Label>
                <TextBox x:Name="MaxPriceTextBox" TextChanged="FilterPrice_TextChanged" Margin="0,0,0,10" PreviewTextInput="NumericOnly_PreviewTextInput"/>

                <Label>Производитель:</Label>
                <ComboBox x:Name="ManufacturerFilterComboBox" SelectionChanged="FilterByManufacturer_SelectionChanged" Margin="0,0,0,10"/>
            </StackPanel>
        </Grid>

        <StatusBar Grid.Row="2">
            <StatusBarItem>
                <TextBlock x:Name="StatusBar" Text="Готово"/>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>
